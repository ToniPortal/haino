"use strict";const e=require("path"),r=require("fs"),t=require("extract-zip"),{pipeline:i}=require("stream/promises");module.exports=async function(s){try{const a=`https://bddship.alwaysdata.net/download/${s}`,o=`${s}.zip`,c=e.join(__dirname,"..","plugin",s);await r.promises.mkdir(c,{recursive:!0});const n=await fetch(a);if(!n.ok)throw new Error(`Impossible de télécharger le fichier. Code d'erreur : ${n.status}`);const d=e.join(c,o),u=r.createWriteStream(d);return await i(n.body,u),await t(d,{dir:c}),await r.promises.unlink(d),console.log("Le fichier a été téléchargé, décompressé et déplacé avec succès."),c}catch(e){throw new Error(`Une erreur s'est produite lors du téléchargement et de l'extraction du fichier : ${e.message}`)}};
